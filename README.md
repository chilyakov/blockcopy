# block-level copy util (blcp) for Linux
Программа предназначена для поблочного копирования (синхронизации) файлов.  
В процессе работы считывается блок исходного файла, вычисляется его контрольная сумма, затем контрольная сумма сверяется с таким же блоком файла назначения.   Если контрольные суммы блоков совпадают, то данные не передаются и не записываются, считывается следующий блок файла.  
Шифрование не применяется, т.к. оно повышает нагрузку на CPU, не предполагается использование программы за пределами локальной сети.  

Программа подходит для синхронизации файлов образов виртуальных машин в кластере Proxmox VE.  
Виртуальные машины в кластере могут перемещаться между узлами, поэтому серверная часть должна работать на всех узлах.  
С определенной периодичностью с клиентских узлов копируются образы работающих машин.  
Если в процессе синхронизации произойдет аварийная ситуация, то конечный файл останется неповрежденным.  

Предназначение файлов:  
blcpf - для локальной синхронизации файлов, без использования сети  
blcpc - клиентская часть сетевой версии  
blcps - серверная часть сетевой версии  
sync_nodes.sh - крипт для копирования файлов, запускается через cron  

Наилучшим способом решения является пересборка rsync с увеличением макс. размера блока и сборка hpnssh для отключения шифрования при передаче  
/usr/local/bin/rsync -e "/usr/local/bin/hpnssh -oNoneSwitch=yes -oNoneEnabled=yes -x -p 2222" -a -B 1048576 --inplace --no-whole-file $file pve2.sync:/$file &  
